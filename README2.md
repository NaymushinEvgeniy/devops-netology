# Курсовая работа по итогам модуля "DevOps и системное администрирование"

### 1. Создайте виртуальную машину Linux.
![](https://c.radikal.ru/c40/2201/89/64ee42a6008b.png)

### 2. Установите ufw и разрешите к этой машине сессии на порты 22 и 443, при этом трафик на интерфейсе localhost (lo) должен ходить свободно на все порты.

![](https://a.radikal.ru/a43/2201/dc/0acd816372d8.png)

### 3. Установите hashicorp vault

![](https://a.radikal.ru/a01/2201/a9/40a9290bcd58.png)

### 4. Cоздайте центр сертификации по инструкции и выпустите сертификат для использования его в настройке веб-сервера nginx (срок жизни сертификата - месяц).

![](https://b.radikal.ru/b05/2201/94/899820581059.png)

### 5. Установите корневой сертификат созданного центра сертификации в доверенные в хостовой системе.
Генерация корневого сертификата
![](https://a.radikal.ru/a18/2201/e5/2d686796929c.jpg)
Генерация промежуточного
![](https://a.radikal.ru/a38/2201/23/90822c57a1e4.jpg)
Итоговая цепочка сертификатов:
![](https://c.radikal.ru/c27/2201/2b/faa185a0177e.jpg)

### 6. Установите nginx

![](https://a.radikal.ru/a30/2201/ac/884d37bdd7c7.png)

### 7. По инструкции настройте nginx на https, используя ранее подготовленный сертификат:

    - можно использовать стандартную стартовую страницу nginx для демонстрации работы сервера;
    - можно использовать и другой html файл, сделанный вами;

![](https://c.radikal.ru/c07/2201/66/72a3b9cb8577.png)

### 8. Откройте в браузере на хосте https адрес страницы, которую обслуживает сервер nginx.

![](https://c.radikal.ru/c16/2201/f3/f8715f433777.jpg)

### 9. Создайте скрипт, который будет генерировать новый сертификат в vault:

    - генерируем новый сертификат так, чтобы не переписывать конфиг nginx;
    - перезапускаем nginx для применения нового сертификата.

![](https://b.radikal.ru/b32/2201/66/a090665ac83f.jpg)

Вывод работы скрипта:
![](https://b.radikal.ru/b27/2201/22/233937e292bb.jpg)

### 10. Поместите скрипт в crontab, чтобы сертификат обновлялся какого-то числа каждого месяца в удобное для вас время.

![](https://c.radikal.ru/c27/2201/dc/8f71303f54b7.jpg)


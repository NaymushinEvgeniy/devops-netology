# Домашнее задание к занятию "6.1. Типы и структура СУБД"

### Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде

Документоориентированные NoSQL БД (MongoDB)
Высокопроизводительная БД (что важно для электронной коммерции) адаптированная под хранение данных в формате JSON

- Склады и автомобильные дороги для логистической компании

Объектно-ориентированные БД
В отсутствии требований взаимосвязанности этих данных отлично подойдут для их предстваления в виде объектов

- Генеалогические деревья

Иерархические БД
По своей структуре полностью повторяют заявленную модель данных с достаточно важным свойством в виде однозначного 
определения объекта - предка по отношению к объекту/объектам потомков

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации

NoSQL БД
Высокопроизводительные БД(что достаточно важно для механизмов авторизации), широко распространенные в технологии 
кеширования с особенностями в виде ограниченного времени хранения

- Отношения клиент-покупка для интернет-магазина

Реляционные БД
Наиболее подходящий вариант для хранения критически важных данных (клиенты, покупки клиентов) с механизмом связи 
между заданными наборами данных

### Задача 2

Вы создали распределенное высоко нагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой 
классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и 
для каждого пункта надо привести классификацию):

Данные записываются на все узлы с задержкой до часа (асинхронная запись)
При сетевых сбоях, система может разделиться на 2 раздельных кластера
Система может не прислать корректный ответ или сбросить соединение
А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

1. Данные записываются на все узлы с задержкой до часа (асинхронная запись):
Система всегда доступна, но данные в ответе узлов могут отличаться - они не согласованы, но доступны и устойчивы к 
разделению (узлы между собой не общаются либо с большим таймаутом, либо не общаются совсем).
Пример - разделенная БД 1С.
В центральном офисе может располагаться центральный экземпляр узла БД, в филиалах расположены распределенные узлы.
Базы периодически синхронизируются (например обмен XML-файлами обмена по FTP)
Согласно PACELC: При сетевом разделении, эти базы доступны и не консистентные, в случае отсутствия разделения (например 
базы синхронизируются в текущий момент) приоритеты не понятны, так что может быть как EL так и EC хотя подсознательно 
ближе к тому, что система будет бороться за время ответа.

2. При сетевых сбоях, система может разделиться на 2 раздельных кластера
Разделение кластера на 2 узла это и есть Partition Tolerance - так как система в первую очередь остаться живой, и в 
случае каких-то проблем будет отвечать всегда, и даже если кластер развалится, то отдельные узлы будут отвечать, но не 
согласованно. Отказаться от PT (а значит, выбрать C и A) значит полагать, что система имеет идеальную связь и никогда 
не теряет сообщения между своими частями - в нашем случае это не так. 
Согласно PACELC: При сетевом разделении, базы доступны. но не консистентные, в случае отсутствия разделения (например 
базы синхронизируются в текущий момент) приоритеты не понятны, так что может быть как EL так и EC

3. Система может не прислать корректный ответ или сбросить соединение:
Если ответ системы приходит, причем в согласованном виде, но он некорректен - значит внутри нее есть проблемы. Система 
игнорирует проблемы всеми силами пытаясь сохранить согласованность, а уже если и это не получается - возвращает таймаут
(система жертвует Partition Tolerance).
Согласно PACELC: При сетевом разделении, базы не доступны, но консистентные, в случае отсутствия разделения скорее 
всего будут готовы к задержкам, но сохранить консистентность - примеры VoltDB/H-Store и Megastore

### Задача 3
Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?




# 4.1. Командная оболочка Bash: Практические навыки"
1. Есть скрипт:

a=1  
b=2  
c=a+b  
d=$a+$b  
e=$(($a+$b))

Какие значения переменным c,d,e будут присвоены? Почему?

Переменная | Значение | Обоснование
--- |----------| --- |
с | b+a      | Поскольку операция взятия значения переменной не производится, переменной c присваивается строка этого вида 
d | 1+2     | Хоть и берутся значения переменных неявного типа, по прежнему извлекаем набор строк, а не значение выражения
e | 301      | Взяты значения и переменных, и выражения - производится арифметические операции с числами


2. ####Условие:  
На нашем локальном сервере упал сервис и мы написали скрипт, который постоянно проверяет его доступность, записывая дату проверок до тех пор, пока сервис не станет доступным (после чего скрипт должен завершиться). В скрипте допущена ошибка, из-за которой выполнение не может завершиться, при этом место на Жёстком Диске постоянно уменьшается. Что необходимо сделать, чтобы его исправить:
```bash
while ((1==1)
do
	curl https://localhost:4757
	if (($? != 0))
	then
		date >> curl.log
	fi
done
```
####Решение:  
В первой строке пропущена круглая скобка.  
Чтобы место на диске не уменьшалось стремительно, полезно после записи даты в лог сделать таймаут, например командой sleep 600

```bash
#!/bin/bash

host1=habr.com
host2=173.194.222.113
host3=87.250.250.242

hosts=("$host1" "$host2" "$host3")
for h in ${hosts[@]}
do
        for (( i=1; i <= 5; i++ ))
        do
                curl $h >> curl.log
                sleep 1
                done
done
```
3. ####Условие:  
Необходимо дописать скрипт из предыдущего задания так, чтобы он выполнялся до тех пор, пока один из узлов не окажется недоступным. Если любой из узлов недоступен - IP этого узла пишется в файл error, скрипт прерывается.
####Решение:  
```bash
#!/bin/bash

host1=habr.com
host2=173.194.222.113
host3=22.242.532.1

hosts=("$host1" "$host2" "$host3")

while [ 1==1 ]
do
        declare -i err
        for h in ${hosts[@]}
        do
                for (( i=1; i <= 3; i++ ))
                do
                        curl $h
                        err=$?
                        if [ "$err" -ne 0 ]
                        then
                                echo Host $h has been disabled! >> curl.log
                                break 3
                        fi
                        sleep 1
                done
        done
done
```
